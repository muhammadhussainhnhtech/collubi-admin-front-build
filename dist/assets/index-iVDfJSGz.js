import{c as q,R as v,b as Y,o as Q,p as Z,q as J,r as W,j as e,T as X,h as $,i as f,k as ee,l as A,m as se,n as T,e as x,N as b,O as ae,P as j,t as O,D as le,d as te,E as ne,f as ie,Q as re,w as de,U as oe,x as ce,v as me,y as H,z as U,A as G,G as g,H as K,V as xe,W as ue,X as he,Y as pe,Z as ge,_ as je,$ as ve,a0 as fe,a1 as be,a2 as Ne,a3 as we,a4 as _e,a5 as Ce,a6 as Se,a7 as ye,a8 as Re,a9 as L,aa as F,ab as I,ac as z,ad as B,ae as ke,af as Me,ag as De,ah as Pe,ai as Ve,K as Ae}from"./index-BW0vPJFN.js";/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M19.27 13.73A2.5 2.5 0 0 0 17.5 13h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1.5c0-.66-.26-1.3-.73-1.77Z",key:"1sy9ra"}],["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-3-3c-1.66 0-3 1-3 3s1 2 1 3.5V13",key:"cnxgux"}]],Le=q("Stamp",Te);function Fe({columns:s,data:o}){var p;const[r,i]=v.useState([]),[u,t]=v.useState([]),[d,h]=v.useState({}),[c,m]=v.useState({}),a=Y({data:o,columns:s,onSortingChange:i,onColumnFiltersChange:t,getCoreRowModel:W(),getPaginationRowModel:J(),getSortedRowModel:Z(),getFilteredRowModel:Q(),onColumnVisibilityChange:h,onRowSelectionChange:m,state:{sorting:r,columnFilters:u,columnVisibility:d,rowSelection:c}});return e.jsxs("div",{className:"w-full overflow-x-auto",children:[e.jsx("div",{className:"flex flex-wrap  justify-between py-4 gap-y-4"}),e.jsx("div",{className:"rounded-md border border-sidebar-border overflow-x-auto",children:e.jsxs(X,{children:[e.jsx($,{children:a.getHeaderGroups().map(n=>e.jsx(f,{children:n.headers.map(l=>e.jsx(ee,{className:"text-center",children:l.isPlaceholder?null:A(l.column.columnDef.header,l.getContext())},l.id))},n.id))}),e.jsx(se,{children:(p=a.getRowModel().rows)!=null&&p.length?a.getRowModel().rows.map(n=>e.jsx(f,{"data-state":n.getIsSelected()&&"selected",children:n.getVisibleCells().map(l=>e.jsx(T,{className:"text-center",children:A(l.column.columnDef.cell,l.getContext())},l.id))},n.id)):e.jsx(f,{children:e.jsx(T,{colSpan:s.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between space-y-2 sm:space-y-0 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground text-center sm:text-left",children:[a.getFilteredSelectedRowModel().rows.length," of ",a.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>a.previousPage(),disabled:!a.getCanPreviousPage(),children:"Previous"}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>a.nextPage(),disabled:!a.getCanNextPage(),children:"Next"})]})]})]})}const Ie={pending:"bg-yellow-500 text-white",approved:"bg-green-500 text-white",rejected:"bg-red-500 text-white",in_progress:"bg-blue-500 text-white",expired:"bg-gray-500 text-white",cancelled:"bg-orange-500 text-white"},ze=[{accessorKey:"name",header:"Document Name",cell:({row:s})=>e.jsx("div",{className:"font-medium",children:s.original.name})},{accessorKey:"status",header:"Status",cell:({row:s})=>e.jsx(b,{className:Ie[s.original.approval_status],children:s.original.approval_status})},{accessorKey:"comments",header:"Comments",cell:({row:s})=>e.jsx("div",{className:"font-medium",children:s.original.comments||"No comments"})},{id:"actions",header:"Actions",cell:({row:s})=>{const[o,{isLoading:r}]=ae(),[i,u]=j.useState("pending"),[t,d]=j.useState(""),[h,c]=j.useState(!1),m=async()=>{try{const a=await o({document_id:s.original.document_id,approval_status:i,comments:t}).unwrap();a.status==!0&&xe.success(a.message)}catch(a){console.error("Error updating status:",a)}c(!1)};return s.original.is_uploaded_by_vendor?e.jsx("div",{className:"flex items-center justify-center space-x-2",children:e.jsxs(O,{open:h,onOpenChange:c,children:[e.jsxs(le,{modal:!1,children:[e.jsx(te,{asChild:!0,children:e.jsx(x,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(ne,{})})}),e.jsxs(ie,{align:"end",children:[e.jsx(re,{children:"Actions"}),e.jsx(de,{to:s.original.document,target:"_blank",children:e.jsxs(x,{className:"w-full cursor-pointer",children:[e.jsx(oe,{})," View"]})}),e.jsx(ce,{asChild:!0,children:e.jsx(me,{className:"p-0 mt-1",children:e.jsxs(x,{className:"w-full cursor-pointer",children:[" ",e.jsx(Le,{})," Change Status"]})})})]})]}),e.jsxs(H,{className:"sm:max-w-[425px]",children:[e.jsx(U,{children:e.jsx(G,{children:"Vendor Document Details"})}),e.jsxs("div",{className:"grid gap-4 py-2",children:[e.jsxs("div",{children:[e.jsx(g,{className:"font-bold",children:"Name"}),e.jsx("p",{children:s.original.name})]}),e.jsxs("div",{children:[e.jsx(g,{className:"font-bold",children:"Description"}),e.jsx("p",{children:s.original.description})]}),e.jsxs("div",{children:[e.jsx(g,{className:"font-bold",children:"Current Status"}),e.jsx("p",{children:s.original.approval_status})]}),e.jsxs("div",{children:[e.jsx(g,{className:"font-bold",children:"New Status"}),e.jsxs("select",{className:"bg-black p-2 rounded w-full",value:i,onChange:a=>u(a.target.value),children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx(g,{className:"font-bold",children:"Comments (Optional)"}),e.jsx("textarea",{className:"border border-gray-400 p-2 rounded w-full",value:t,onChange:a=>d(a.target.value),placeholder:"Add comment (optional)"})]})]}),e.jsx(K,{children:e.jsx(x,{onClick:m,disabled:r,children:r?"Updating...":"Change Status"})})]})]})}):e.jsx("div",{className:"text-center text-red-500 font-semibold",children:"Document not uploaded"})}}],E=[{value:"bronze",label:"Bronze",img:pe},{value:"silver",label:"Silver",img:ge},{value:"gold",label:"Gold",img:je},{value:"platinum",label:"Platinum",img:ve},{value:"diamond",label:"Diamond",img:fe},{value:"master",label:"Master",img:be},{value:"grandmaster",label:"Grandmaster",img:Ne}],Be=({rank:s})=>{var n;const o=ue(),i=new URLSearchParams(o.search).get("id"),[u,t]=j.useState(!1),[d,h]=j.useState(s),[c,{isLoading:m}]=he(),a=(n=E.find(l=>l.value===s))==null?void 0:n.img,p=async()=>{if(d)try{await c({user_id:i,rank:d}).unwrap(),t(!1)}catch(l){console.error("Failed to update rank",l)}};return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"flex items-center gap-2",children:["Rank: ",s,a&&e.jsx("img",{src:a,alt:s,className:"w-10"})]}),e.jsx(x,{onClick:()=>t(!0),children:"Update Rank"}),e.jsx(O,{open:u,onOpenChange:t,children:e.jsxs(H,{children:[e.jsx(U,{children:e.jsx(G,{children:"Update Seller Rank"})}),e.jsxs(we,{value:d,onValueChange:h,children:[e.jsx(_e,{className:"w-full",children:e.jsx(Ce,{placeholder:"Select a rank"})}),e.jsx(Se,{children:E.map(l=>e.jsx(ye,{value:l.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:l.img,alt:l.label,className:"w-5"}),l.label]})},l.value))})]}),e.jsxs(K,{children:[e.jsx(x,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsx(x,{onClick:p,disabled:m,children:m?"Saving...":"Save"})]})]})})]})},Ee=({data:s})=>{var r,i,u,t,d,h,c,m,a,p,n,l,N,w,_,C,S,y,R,k,M,D,P,V;const[o]=Re();if(s)return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-6",children:[e.jsx(L,{children:e.jsx(F,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(I,{className:"w-16 h-16 z-0",children:e.jsx(z,{src:(r=s.data)==null?void 0:r.profile_image})}),e.jsxs("div",{children:[e.jsxs(B,{className:"text-xl",children:[(i=s.data)==null?void 0:i.first_name," ",(u=s.data)==null?void 0:u.middle_name," ",(t=s.data)==null?void 0:t.last_name]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(d=s.data)==null?void 0:d.email}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Mobile: ",(h=s.data)==null?void 0:h.mobile_number]})]})]})})}),e.jsxs(L,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(I,{className:"w-16 h-16 rounded-md",children:e.jsx(z,{src:(c=s.data)==null?void 0:c.vendor_profile.profile_logo})}),e.jsxs("div",{children:[e.jsx(B,{children:(m=s.data)==null?void 0:m.vendor_profile.profile_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Documents Approved:"," ",(a=s.data)!=null&&a.vendor_profile.is_all_documents_approved?"Yes":"No"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Account Verified:"," ",(p=s.data)!=null&&p.vendor_profile.is_account_verified?"Yes":"No"]})]}),e.jsx("div",{className:"flex items-center space-x-2"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl border  shadow-sm ",children:[e.jsxs("div",{children:[e.jsx(g,{className:"text-xs text-sidebar-foreground",children:"Account Status"}),e.jsx("div",{className:"text-md font-medium text-sidebar-accent-foreground",children:s.data.vendor_profile.is_admin_disabled?"Blocked":"Active"})]}),e.jsx(ke,{checked:!s.data.vendor_profile.is_admin_disabled,onCheckedChange:async()=>{await o({user_id:s.data.id})},className:"data-[state=checked]:bg-green-600  data-[state=unchecked]:bg-red-500"})]})]})}),e.jsxs(Me,{children:[e.jsx(De,{className:"my-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Be,{rank:(l=(n=s==null?void 0:s.data)==null?void 0:n.vendor_profile)==null?void 0:l.rank}),e.jsxs("p",{children:["Joined At: ",(w=(N=s==null?void 0:s.data)==null?void 0:N.vendor_profile)==null?void 0:w.joined_at]}),e.jsxs("p",{className:"",children:["PayPal: ",(C=(_=s.data)==null?void 0:_.vendor_profile)==null?void 0:C.paypal_email]}),e.jsxs("p",{children:["PayPal Verified:"," ",e.jsx(b,{variant:(y=(S=s.data)==null?void 0:S.vendor_profile)!=null&&y.is_paypal_verified?"default":"destructive",children:(k=(R=s.data)==null?void 0:R.vendor_profile)!=null&&k.is_paypal_verified?"Verified":"Unverified"})]}),e.jsxs("p",{children:["Is Documents Verified:"," ",e.jsx(b,{variant:(D=(M=s.data)==null?void 0:M.vendor_profile)!=null&&D.is_all_documents_approved?"default":"destructive",children:(V=(P=s.data)==null?void 0:P.vendor_profile)!=null&&V.is_all_documents_approved?"Verified":"Not Verified"})]})]})]})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Fe,{columns:ze,data:s.data.vendor_docs})})]})};function He(){const[s]=Pe(),o=s.get("id"),{data:r,isLoading:i}=Ve(String(o));return i?e.jsx(Ae,{}):e.jsx(Ee,{data:r})}export{He as default};
